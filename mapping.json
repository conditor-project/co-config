{
	"settings": {
		"index": {
			"number_of_replicas": 0
		},
		"analysis": {
			"char_filter": {
				"whitespace_remove": {
					"type": "pattern_replace",
					"pattern": "\\s+",
					"replacement": ""
				},
				"punctuation_remove": {
					"type": "pattern_replace",
					"pattern": "\\p{P}",
					"replacement": ""
				},
				"spacenum": {
					"type": "pattern_replace",
					"pattern": "[^0-9]",
					"replacement": "_"
				},
				"num": {
					"type": "pattern_replace",
					"pattern": "[^0-9]",
					"replacement": ""
				},
				"annee": {
					"type": "pattern_replace",
					"pattern": ".*([0-9]{4}).*",
					"replacement": "$1"
				},
				"alphanum": {
					"type": "pattern_replace",
					"pattern": "[^0-9a-zA-Z]",
					"replacement": ""
				},
				"firstnum": {
					"type": "pattern_replace",
					"pattern": "^[_]*([0-9]+)[_]*.*",
					"replacement": "$1"
				},
				"remove_underscore": {
					"type": "pattern_replace",
					"pattern": "[_]",
					"replacement": ""
				}
			},
			"filter": {
				"my_asciifolding": {
					"type": "asciifolding",
					"preserve_original": false
				}
			},
			"normalizer": {
				"title:normalizer": {
					"type": "custom",
					"char_filter": [
						"whitespace_remove",
						"punctuation_remove"
					],
					"filter": [
						"lowercase",
						"my_asciifolding",
						"icu_normalizer"
					]
				},
				"id:normalizer": {
					"type": "custom",
					"char_filter": [
						"alphanum"
					],
					"filter": [
						"lowercase"
					]
				},
				"publicationDate:normalizer": {
					"type": "custom",
					"char_filter": [
						"annee"
					]
				}
			}
		}
	},
	"mappings": {
			"dynamic": false,
			"properties": {
				"host": {
					"properties": {
						"title": {
							"type": "text",
							"fields": {
								"normalized": {
									"type": "keyword"
								}
							}
						},
						"issue": {
							"type": "keyword"
						},
						"volume": {
							"type": "keyword"
						},
						"xissn": {
							"type": "keyword"
						},
						"pages": {
							"properties": {
								"pageRange": {
									"type": "keyword"
								}
							}
						}
					}
				},
				"idConditor": {
					"type": "keyword"
				},
				"sourceId": {
					"type": "keyword"
				},
				"sourceUid": {
					"type": "keyword"
				},
				"doi": {
					"type": "text",
					"fields": {
						"normalized": {
							"type": "keyword",
							"normalizer": "id:normalizer"
						}
					}
				},
				"halId": {
					"type": "text",
					"fields": {
						"normalized": {
							"type": "keyword",
							"normalizer": "id:normalizer"
						}
					}
				},
				"arxiv": {
					"type": "text",
					"fields": {
						"normalized": {
							"type": "keyword",
							"normalizer": "id:normalizer"
						}
					}
				},
				"utKey": {
					"type": "text",
					"fields": {
						"normalized": {
							"type": "keyword",
							"normalizer": "id:normalizer"
						}
					}
				},
				"source": {
					"type": "keyword"
				},
				"title": {
					"dynamic": false,
					"properties": {
						"default": {
							"type": "text",
							"fields": {
								"normalized": {
									"type": "keyword",
									"normalizer": "title:normalizer"
								}
							}
						},
						"fr": {
							"type": "text",
							"fields": {
								"normalized": {
									"type": "keyword",
									"normalizer": "title:normalizer"
								}
							}
						},
						"en": {
							"type": "text",
							"fields": {
								"normalized": {
									"type": "keyword",
									"normalizer": "title:normalizer"
								}
							}
						}
					}
				},
				"documentType": {
					"type": "keyword"
				},
				"typeConditor": {
					"type": "text",
					"index": true,
					"fields": {
						"normalized": {
							"type": "keyword"
						}
					}
				},
				"isDuplicate": {
					"type": "boolean"
				},
				"isDeduplicable": {
					"type": "boolean"
				},
				"hasTransDuplicate": {
					"type": "boolean"
				},
				"duplicates": {
					"type": "nested",
					"properties": {
						"idConditor": {
							"type": "keyword"
						},
						"sourceUid": {
							"type": "keyword"
						},
						"rules": {
							"type": "text"
						},
						"sessionName": {
							"type": "keyword"
						},
						"source": {
							"type": "keyword"
						},
						"isValidatedByUser": {
							"type": "boolean"
						}
					}
				},
				"duplicateRules": {
					"type": "keyword"
				},
				"idDuplicate": {
					"type": "nested"
				},
				"idChain": {
					"type": "keyword"
				},
				"xPublicationDate": {
					"type": "text",
					"fields": {
						"date": {
							"type": "date",
							"format": "yyy-MM-dd HH:mm:ss||yyy-MM-dd||yyy-MM||yyyy",
							"ignore_malformed": true
						},
						"normalized": {
							"type": "keyword",
							"normalizer": "publicationDate:normalizer"
						}
					}
				}
			}
		}
}
